<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BrainChat - 1:1 Chat in Brainfuck</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            bg: '#080810',
            surface: '#0f0f1a',
            card: '#151525',
            border: '#252540',
            accent: '#00ff9d',
            accent2: '#00d4ff',
            dim: '#4a4a6a'
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&display=swap');
    body { font-family: 'JetBrains Mono', monospace; }
    .bf-tape { display: flex; gap: 2px; overflow-x: auto; }
    .bf-cell { min-width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 9px; border-radius: 2px; }
    .glow { box-shadow: 0 0 20px rgba(0, 255, 157, 0.2); }
  </style>
</head>
<body class="bg-bg text-gray-300 min-h-screen">
  
  <div class="max-w-5xl mx-auto p-4">
    <!-- Header -->
    <header class="text-center py-6 border-b border-border mb-6">
      <h1 class="text-3xl font-bold text-accent">üß† BrainChat</h1>
      <p class="text-dim text-sm mt-1">1:1 Server Chat Application in Brainfuck</p>
      <p class="text-xs text-dim mt-2">EWOR Technical Case Study</p>
    </header>

    <!-- Main Grid -->
    <div class="grid grid-cols-3 gap-4">
      
      <!-- Left: Chat Panel -->
      <div class="col-span-2 space-y-4">
        
        <!-- API Key + Model Selection -->
        <div class="bg-surface border border-border rounded-lg p-3">
          <div class="flex gap-2 items-center">
            <input type="password" id="apiKeyInput" placeholder="OpenRouter API Key"
                   class="flex-1 px-3 py-2 bg-card border border-border rounded text-sm focus:border-accent focus:outline-none">
            <select id="modelSelect" class="px-3 py-2 bg-card border border-border rounded text-sm focus:border-accent focus:outline-none">
              <option value="auto">ü§ñ Auto (Brainfuck)</option>
              <option value="perplexity">üîç Perplexity</option>
              <option value="chatgpt">üí¨ ChatGPT</option>
              <option value="mistral">‚ö° Mistral</option>
            </select>
            <button id="saveKeyBtn" class="px-4 py-2 bg-accent text-bg font-bold rounded text-sm">Save</button>
          </div>
          <div class="flex justify-between items-center mt-2">
            <span id="keyStatus" class="text-xs text-accent"></span>
            <span class="text-xs text-dim">Auto mode uses Brainfuck to select the best model</span>
          </div>
        </div>

        <!-- Chat Messages -->
        <div id="chatBox" class="bg-surface border border-border rounded-lg h-80 overflow-y-auto p-4 space-y-3"></div>

        <!-- Input -->
        <form id="chatForm" class="flex gap-2">
          <input type="text" id="queryInput" placeholder="Ask anything..." autocomplete="off" required
                 class="flex-1 px-4 py-3 bg-surface border border-border rounded-lg focus:border-accent focus:outline-none">
          <button type="submit" class="px-6 py-3 bg-accent text-bg font-bold rounded-lg hover:bg-green-400 transition">Send</button>
        </form>
      </div>

      <!-- Right: Brainfuck Execution Panel -->
      <div class="space-y-3">
        <h2 class="text-sm font-bold text-accent uppercase tracking-wider">Live BF Execution</h2>

        <!-- Model Router -->
        <div id="routerPanel" class="bg-card border border-border rounded-lg p-3">
          <div class="flex justify-between items-center mb-2">
            <span class="text-accent font-bold text-xs">üîÄ Model Router</span>
            <span id="routerStatus" class="text-xs text-dim">idle</span>
          </div>
          <div id="routerCode" class="text-[8px] text-pink-400 bg-bg p-2 rounded overflow-x-auto whitespace-nowrap mb-2 h-8">-</div>
          <div id="routerResult" class="text-xs text-dim">Waiting for query...</div>
        </div>

        <!-- Token Counter -->
        <div id="tokenPanel" class="bg-card border border-border rounded-lg p-3">
          <div class="flex justify-between items-center mb-2">
            <span class="text-accent2 font-bold text-xs">üìä Token Counter</span>
            <span id="tokenStatus" class="text-xs text-dim">idle</span>
          </div>
          <div id="tokenCode" class="text-[8px] text-pink-400 bg-bg p-2 rounded overflow-x-auto whitespace-nowrap mb-2 h-8">-</div>
          <div id="tokenResult" class="text-xs text-dim">-</div>
        </div>

        <!-- Cost Calculator -->
        <div id="costPanel" class="bg-card border border-border rounded-lg p-3">
          <div class="flex justify-between items-center mb-2">
            <span class="text-yellow-400 font-bold text-xs">üí∞ Cost Calculator</span>
            <span id="costStatus" class="text-xs text-dim">idle</span>
          </div>
          <div id="costCode" class="text-[8px] text-pink-400 bg-bg p-2 rounded overflow-x-auto whitespace-nowrap mb-2 h-8">-</div>
          <div id="costResult" class="text-xs text-dim">-</div>
        </div>

        <!-- Confidence Scorer -->
        <div id="scorerPanel" class="bg-card border border-border rounded-lg p-3">
          <div class="flex justify-between items-center mb-2">
            <span class="text-purple-400 font-bold text-xs">üéØ Confidence Scorer</span>
            <span id="scorerStatus" class="text-xs text-dim">idle</span>
          </div>
          <div id="scorerCode" class="text-[8px] text-pink-400 bg-bg p-2 rounded overflow-x-auto whitespace-nowrap mb-2 h-8">-</div>
          <div id="scorerResult" class="text-xs text-dim">-</div>
        </div>

        <!-- Stats -->
        <div class="bg-surface border border-border rounded-lg p-3">
          <h3 class="text-xs font-bold text-dim mb-2">Response Stats</h3>
          <div class="grid grid-cols-2 gap-2 text-xs">
            <div><span class="text-dim">Time:</span> <span id="statTime" class="text-accent">-</span></div>
            <div><span class="text-dim">Tokens:</span> <span id="statTokens" class="text-accent">-</span></div>
            <div><span class="text-dim">Cost:</span> <span id="statCost" class="text-accent">-</span></div>
            <div><span class="text-dim">Confidence:</span> <span id="statConfidence" class="text-accent">-</span></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-4 mt-6 border-t border-border text-xs text-dim">
      <p>Brainfuck handles: Model Routing ‚Ä¢ Token Counting ‚Ä¢ Cost Calculation ‚Ä¢ Confidence Scoring</p>
      <a href="https://github.com/abhinxx/brainchat-mvp" target="_blank" class="text-accent hover:underline">View Source on GitHub ‚Üí</a>
    </footer>
  </div>

  <script src="/app.js"></script>
</body>
</html>
